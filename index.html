<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cycle Syncing Tracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f9f9f9;
      color: #333;
      text-align: center;
    }
    .container {
      max-width: 400px;
      margin: auto;
      padding: 20px;
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    .month-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
    }
    .day {
      padding: 10px;
      border-radius: 5px;
      background-color: #f0f0f0;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .day:hover {
      background-color: #ddd;
    }
    .selected {
      background-color: #A17E89 !important;
      color: white;
    }
    .follicular {
      background-color: #FFC1E3 !important;
    }
    .ovulatory {
      background-color: #FF8C8C !important;
    }
    .luteal {
      background-color: #FFD700 !important;
    }
    .menstrual {
      background-color: #A17E89 !important;
      color: white;
    }
    .phase-info {
      margin-top: 15px;
      font-size: 16px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Cycle Syncing Tracker</h2>

    <div class="month-navigation">
      <button id="prev-month">◀</button>
      <span id="month-year"></span>
      <button id="next-month">▶</button>
    </div>

    <div class="calendar" id="calendar"></div>

    <p>Click the first day of your period to track your cycle.</p>
    <p class="phase-info" id="phase-info"></p>
  </div>

  <script>
    const cyclePhases = ["Menstrual", "Follicular", "Ovulatory", "Luteal"];
    const phaseDescriptions = {
      "Menstrual": "Your period has started. Rest and recover.",
      "Follicular": "Energy is rising! Best time for productivity.",
      "Ovulatory": "You’re at peak energy and confidence.",
      "Luteal": "Time to slow down, focus on self-care."
    };

    let selectedDate = JSON.parse(localStorage.getItem("selectedDate")) || null;
    let currentMonth = new Date().getMonth();
    let currentYear = new Date().getFullYear();

    function generateCalendar() {
      const calendar = document.getElementById("calendar");
      calendar.innerHTML = "";

      const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
      document.getElementById("month-year").textContent = 
        new Date(currentYear, currentMonth).toLocaleString('default', { month: 'long', year: 'numeric' });

      for (let day = 1; day <= daysInMonth; day++) {
        const dayElement = document.createElement("div");
        dayElement.classList.add("day");
        dayElement.textContent = day;

        if (selectedDate && isSameMonth(selectedDate, currentMonth, currentYear)) {
          const cycleDay = (day - selectedDate.day + 28) % 28;
          let phase = getPhase(cycleDay);
          if (phase) dayElement.classList.add(phase.toLowerCase());
        }

        dayElement.addEventListener("click", () => {
          if (!selectedDate || !isSameMonth(selectedDate, currentMonth, currentYear)) {
            selectedDate = { day, month: currentMonth, year: currentYear };
            localStorage.setItem("selectedDate", JSON.stringify(selectedDate));
          }
          updatePhaseInfo(day);
          generateCalendar();
        });

        calendar.appendChild(dayElement);
      }
    }

    function getPhase(cycleDay) {
      if (cycleDay < 5) return "Menstrual";
      if (cycleDay < 10) return "Follicular";
      if (cycleDay < 15) return "Ovulatory";
      return "Luteal";
    }

    function updatePhaseInfo(day) {
      const cycleDay = (day - selectedDate.day + 28) % 28;
      const phase = getPhase(cycleDay);
      document.getElementById("phase-info").textContent = 
        `${phase} Phase: ${phaseDescriptions[phase]}`;
    }

    function isSameMonth(date, month, year) {
      return date && date.month === month && date.year === year;
    }

    document.getElementById("prev-month").addEventListener("click", () => {
      currentMonth = currentMonth === 0 ? 11 : currentMonth - 1;
      if (currentMonth === 11) currentYear--;
      generateCalendar();
    });

    document.getElementById("next-month").addEventListener("click", () => {
      currentMonth = currentMonth === 11 ? 0 : currentMonth + 1;
      if (currentMonth === 0) currentYear++;
      generateCalendar();
    });

    generateCalendar();
  </script>
</body>
</html>
